<!doctype html>
{% load static %}
<html>
<head>
  <meta charset="utf-8">
  <title>Compression Result</title>
  <link rel="stylesheet" href="{% static 'compressor/css/styles.css' %}">
</head>
<body>
  <main class="container">
    <h1>Compression Result</h1>

    <div class="row">
      <div class="col">
        <h3>Original</h3>
        <img src="{{ orig_url }}" alt="original" class="preview">
        <p>Size: {{ orig_size }} bytes</p>
      </div>

      <div class="col">
        <h3>Compressed ({{ method_display|default:"SVD" }}, size={{ size_label|default:size|default:1.0 }})</h3>
        <img src="{{ comp_url }}" alt="compressed" class="preview">
        <p>Size: {{ comp_size }} bytes — Dimensions: {{ comp_width }}x{{ comp_height }} px</p>
        <p style="margin-top:8px">
          <a href="{{ comp_url }}" download class="btn">Download compressed</a>
          <a href="{{ orig_url }}" download class="btn secondary" style="margin-left:8px">Download original</a>
        </p>
      </div>
    </div>

    <div class="metrics">
      <p><strong>Method:</strong> {{ method_display|default:"SVD" }}</p>
      <p><strong>Compression ratio:</strong> {{ ratio|floatformat:2 }}x</p>
      <p><strong>PSNR:</strong> {{ psnr|floatformat:2 }} dB</p>
      {% if auto_increased %}
      <p class="hint">⚠️ Note: Compression parameter was automatically increased to maintain quality.</p>
      {% endif %}
      <p class="hint">Higher PSNR means closer to original. Aim for ≥ 30 dB for decent quality (depends on image).</p>
    </div>

    <a href="{% url 'compressor:index' %}" class="btn secondary back-btn" aria-label="Back to compressor">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px">
        <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Back
    </a>
  </main>
</body>
</html>
